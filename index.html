<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <section>
                <h1>Tech Structure Of XXX</h1>
                <aside class="notes">
                    Hi everyone, welcome to today's session.
                    We'll talk about how we built a frontend project in XXX project, and show how we make all of those
                    work together in our code.
                    All the session, We'll focus on the technology in frontend, not the devops or other skills.
                </aside>
            </section>
            <section>
                <img width="80%" height="auto" data-src="./imgs/strcture.png">
                <aside class="notes">
                    It's a technical map for our code.
                    We use the NPM, React and Typescript as our base framework to support the OOP and Component
                    function.
                    And for user experience, the MUI is our choose.
                    And for the restful api call, we chose Axios as the solution.
                    And for the developing without the backend, we chose MirageJs.
                    And for the testing, we chose Jest and Testing Library to test both the logic and UI.
                    And for the code check and format, we chose the eslint and husky.
                    That's all for the frameworks we'll share today. Next, let's share some sample introductions for all
                    the frameworks to you.
                </aside>
            </section>
        </section>
        <section>
            <section>
                <h2>React</h2>
                <p>A JavaScript library for building user interfaces</p>
                <img width="20%" height="auto" data-src="./imgs/react.png">
            </section>
            <section>
                <h3>React Scripts</h3>
                <p>
                    It's simply to create single-page React App.
                </p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        $ npx create-react-app my-app
                        $ cd my-app
                        $ npm start

                        // if want create a typescript app, following the code
                        $ npx create-react-app my-app --template typescript
                    </code>
                </pre>
                <aside class="notes">
                    react is a JavaScript library for building user interfaces,
                    it provide a script to help user quickly build single page reach App. this example is create my-app, it just one line code so simply.
                    if want create a typescript app, you can added parameter double bar template typescript.
                </aside>
            </section>
            <section>
                <h3>Component</h3>
                <p>Components let you split the UI into independent, reusable pieces</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Welcome(props) {
                          return <h1>Hello, {props.name}</h1>;
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react components let you split the UI into independent, reusable pieces. in our project the vise table and mastercard table have same structure,
                    we can define a table component for these twe table. we just can input different data can show visa table and mastercard table.
                    we can define component as function or lambda.
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                       function Example() {
                          // Add some State
                          // Init && Destroy Something
                          // Watch Something
                          return (
                            <div>
                              <p>You clicked 0 times</p>
                            </div>
                          );
                        }
                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{() => setCount(count + 1)}">
                                Click me
                                </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context, packaged side effect, about this example to introduce effect hooks, we can declare a State variable is count, and if the count have been updated,
                    the useEffect function will sync run to update document title. state and effect function all belong to the hooks. in the project use basic hooks: useState and useEffect and useContext.
                    and the hooks provide other's Additional Hooks: such as useMemo, useCallback (to resolve repeat render / optimize performance).
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Example() {
                          // Add some State
                          const [count, setCount] = useState(0);
                          // Init && Destroy Something
                          // Watch Something

                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{()=> setCount(count + 1)}">
                                Click me
                              </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context, packaged side effect, about this example to introduce effect hooks, we can declare a State variable is count, and if the count have been updated,
                    the useEffect function will sync run to update document title. state and effect function all belong to the hooks. in the project use basic hooks: useState and useEffect and useContext.
                    and the hooks provide other's Additional Hooks: such as useMemo, useCallback (to resolve repeat render / optimize performance).
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Example() {
                          // Add some State
                          const [count, setCount] = useState(0);
                          // Init && Destroy Something
                          useEffect(() => {
                            Websocket.open();
                            return ()=> Websocket.close();
                          },);
                          // Watch Something
                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{()=> setCount(count + 1)}">
                                Click me
                                </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context, packaged side effect, about this example to introduce effect hooks, we can declare a State variable is count, and if the count have been updated,
                    the useEffect function will sync run to update document title. state and effect function all belong to the hooks. in the project use basic hooks: useState and useEffect and useContext.
                    and the hooks provide other's Additional Hooks: such as useMemo, useCallback (to resolve repeat render / optimize performance).
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Example() {
                          // Add some State
                          const [count, setCount] = useState(0);
                          // Init && Destroy Something
                          useEffect(() => {
                            Websocket.open();
                            return ()=> Websocket.close();
                          },);
                          // Watch Something
                          useEffect(() => {
                            document.title = `You clicked ${count} times`;
                          },[count]);
                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{()=> setCount(count + 1)}">
                                Click me
                                </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context, packaged side effect, about this example to introduce effect hooks, we can declare a State variable is count, and if the count have been updated,
                    the useEffect function will sync run to update document title. state and effect function all belong to the hooks. in the project use basic hooks: useState and useEffect and useContext.
                    and the hooks provide other's Additional Hooks: such as useMemo, useCallback (to resolve repeat render / optimize performance).
                </aside>
            </section>
            <section>
                <h3>Router</h3>
                <p>a fully-featured client routing library for React</p>
                <img width="50%" height="auto" data-src="./imgs/router.png">
                <aside class="notes">
                    React Router is a fully-featured client and server-side routing library for React. based by the image can understand react router.
                    chrome return our react app when visiting web page. we can config each component a URI. router based URI to control different components render in a current page.
                    and the link will happened change, but it will not causing a full page reload.
                </aside>
            </section>
        </section>
        <section>
            <section>
                <h2>Mui</h2>
                <p>MUI provides a fast way to develop React applications</p>
                <img width="20%" height="auto" data-src="./imgs/mui.png">
                <aside class="notes">
                    MUI is a popular React UI framework. It provides a fast way to develop React applications. We can
                    reuse many components already created by MUI team.
                </aside>
            </section>
            <section>
                <h3>Mui Install</h3>
                <p>Follow the documents at their website</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                         $ npm install @mui/material @emotion/react @emotion/styled
                    </code>
                </pre>
                <aside class="notes">
                    It's easy to import it to our React project. Just follow the documents at their website.
                </aside>
            </section>
            <section>
                <h3>Mui Component</h3>
                <p>

                </p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers="3|6">
                        <script type="text/template">
                        import * as React from 'react';
                        import ReactDOM from 'react-dom';
                        import Button from '@mui/material/Button';

                        function App() {
                          return <Button variant="contained">Hello World</Button>;
                        }

                        ReactDOM.render(<App/>, document.querySelector('#app'));
                        </script>
                    </code>
                </pre>
                <aside class="notes">
                    And for the components, we can use it in our code after import it the component.
                </aside>
            </section>
            <section>
                <h3>Mui Style</h3>
                <p>

                </p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers="3-4|6-12|15">
                        <script type="text/template">
                        import * as React from 'react';
                        import ReactDOM from 'react-dom';
                        import { red } from '@mui/material/colors';
                        import { ThemeProvider, createTheme } from '@mui/material/styles';

                        const theme = createTheme({
                          palette: {
                            primary: {
                              main: red[500],
                            },
                          },
                        });

                        function App() {
                        return <ThemeProvider theme={theme}>...</ThemeProvider>;
                        }
                        ReactDOM.render( <App/>, document.querySelector('#app'));
                        </script>
                    </code>
                </pre>
                <aside class="notes">
                    We can customize MUI with our own theme. With the ThemeProvider can change the colors, the typography and much more.
                </aside>
            </section>
        </section>
        <section>
            <section>
                <h2>Axios</h2>
                <p>Promise based HTTP client for the browser and node.js</p>
                <img width="20%" src="imgs/axios.png"/>
                <aside class="notes">
                    We always need to communicate with the backend, and usually using RESTful apis.
                    So we chose Axios to finish the network invoke.
                </aside>
            </section>

            <section>
                <h3>Axios Install</h3>
                 <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers>
                         $ npm install axios
                     </code>
                 </pre>
            </section>
            <section>
                <h3>Usuage</h3>
                 <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1|3-9|11-15">
                         import axios from "axios";

                         function someMethod(){
                            // ....
                            const instance = axios.create({
                              baseURL: 'https://some-domain.com/api/',
                              timeout: 1000,
                              headers: {'X-Custom-Header': 'foobar'}
                            });

                            instance.get('/data')
                              .then(res => {
                                // get the response and do anything you want
                                // ....
                            })
                         }
                     </code>
                 </pre>
            </section>
        </section>
        <section>
            <section>
                <h2>miragejs</h2>
                <p>Build complete frontend features,</p>
                <p>even if your API doesn't exist</p>
                <img width="20%" height="auto" data-src="./imgs/mirage.png">
                <aside class="notes">
                    When we develop the frontend in local, there always has a problem that we can't connect to the backend.
                    So we can try to build a mock server which can mock the api response without backend.
                    And we chose MirageJs to do this work.
                </aside>
            </section>
            <section>
                <h3>MirageJs Install</h3>

                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers>
                         $ npm install --save-dev miragejs
                     </code>
                </pre>
                <aside class="notes">
                    Like others, we can use npm install to quick import it to our project.
                    Also, we use a flag save-dev in the shell, so it'll be effective only before building the code,
                    and won't goto our environment.
                </aside>
            </section>
            <section>
                <h3>MirageJs Usage</h3>
                 <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1|4,10|5-9">
                        import { createServer } from "miragejs"

                        export default function () {
                          createServer({
                            routes() {
                              this.get("/data", () => ({
                                reminders: [],
                              }))
                            },
                          })
                        }
                     </code>
                 </pre>
                <aside class="notes">
                    1st, import the createServer form MirageJs.
                    2nd, use the createServer method to build a mock server.
                    3rd, we can define the url we want to mock.
                    Then, all http requests contained in the list from our code in frontend will proxy by MirageJs
                </aside>
            </section>
        </section>
        <section>
            <section>
                <h2>Test</h2>
                <p>Not only the logic, but also the UI</p>
                <p>Jest && Testing Library</p>
                <img width="20%" height="auto" data-src="./imgs/test.png">
                <aside class="notes">
                    To make our code maintainable and strong, we must have complete tests. Not only the logic, but also the UI in frontend.
                    We chose Jest as our base test framework. It's the most popular test framework for JS code. Just like Junit for Java.
                    And chose Testing Library to test the UI part.
                </aside>
            </section>
            <section>
                <h2>Install</h2>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1-2|4-5">
                         // install Jest
                         $ npm install --save-dev jest

                         // install testing-library
                         $ npm install --save-dev @testing-library/react
                     </code>
                 </pre>
            </section>
            <section>
                <h2>Jest Usage</h2>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1-4|7|9,11|10">
                         // some business code
                         export function sum(a, b) {
                           return a + b;
                         }

                         // test with jest
                         import sum form 'SomeBusinessModule'

                         it('adds 1 + 2 to equal 3', () => {
                           expect(sum(1, 2)).toBe(3);
                         });
                     </code>
                 </pre>
            </section>
            <section>
                <h2>Testing Library Usage</h2>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1|2-5|8|10|12|14-16">
                         <script type="text/template">
                            import HelloWorld from '../HelloWorld'
                            import React from 'react'
                            import {render, fireEvent, waitFor, screen}
                             from '@testing-library/react'
                            import '@testing-library/jest-dom'

                            it('loads and displays greeting', async () => {
                              render(<HelloWorld />)

                              fireEvent.click(screen.getByText('Load Greeting'))

                              await waitFor(() => screen.getByRole('heading'))

                              expect(screen.getByRole('heading'))
                                .toHaveTextContent('hello there')
                              expect(screen.getByRole('button')).toBeDisabled()
                            })
                         </script>
                     </code>
                 </pre>
            </section>
        </section>
        <section>
            <section>
                <h2>Eslint</h2>
                <p>Find and fix problems in your JavaScript code</p>
                <p>Already provided by React Script </p>
                <img width="20%" height="auto" data-src="./imgs/eslint.png">
                <aside class="notes">
                    To keep our code readable and maintainable, we should make sure all our code are in same style.
                    We use Eslint to do this work. It just like checkStyle or FindBugs for Java.
                </aside>
            </section>
            <section>
                <p>Change the eslint config file</p>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers>
                         // you'll have a .eslintrc.{js,yml,json} file in your project.
                         // In it, you'll see some rules configured like this
                         // The names "semi" and "quotes" are the names of rules in ESLint.
                         // The first value is the error level of the rule and can be one of these values:
                         {
                            "rules": {
                                "semi": ["error", "always"],
                                "quotes": ["error", "double"]
                            }
                        }
                     </code>
                </pre>
            </section>
            <section>
                <p>Once some errors find by Eslint's static analyze</p>
                <img width="auto" height="auto" data-src="./imgs/eslint-error.png">
            </section>
        </section>
        <section>
            <section>
                <h2>Husky</h2>
                <p>Make easy to add git hook</p>
                <img width="20%" height="auto" data-src="./imgs/husky.png">
                <aside class="notes">
                    To make the code clear in the repo.
                    We add a git hook before each commit to make sure no code error or test error in our code.
                    We chose Husky to do this work.
                </aside>
            </section>
            <section>
                <h3>Install</h3>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1-2|4-6|8-10|13-15">
                         # Install
                         $ npm install husky -D

                         # Edit package.json > prepare script and run it once:
                         $ npm set-script prepare "husky install"
                         $ npm run prepare

                         # Add a hook:
                         $ npx husky add .husky/pre-commit "npm test"
                         $ git add .husky/pre-commit


                         # Make a commit:
                         git commit -m "Keep calm and commit"
                         # `npm test` will run every time you commit\
                     </code>
                 </pre>
            </section>
        </section>
        <section>
            <p>What happened when we request a url</p>
            <img width="80%" height="auto" data-src="./imgs/working-progress.png">
            <aside class="notes">
            </aside>
        </section>
        <section>
            <h2>The Real Code</h2>
            <p>Mix all the things</p>
        </section>
        <section>
            <h2>Thanks</h2>
        </section>
        <section>
            <h2>links</h2>
            <ul>
                <li><a href="https://www.typescriptlang.org/">TypeScript</a></li>
                <li><a href="https://reactjs.org/">React</a></li>
                <li><a href="https://reactrouter.com/">React Router</a></li>
                <li><a href="https://mui.com">MUI</a></li>
                <li><a href="https://github.com/axios/axios/">Axios</a></li>
                <li><a href="https://miragejs.com/">MirageJs</a></li>
                <li><a href="https://jestjs.io/">Jest</a></li>
                <li><a href="https://testing-library.com/">Testing Library</a></li>
                <li><a href="https://eslint.org/">Eslint</a></li>
                <li><a href="https://github.com/typicode/husky">Husky</a></li>
            </ul>
        </section>
    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
  // More info about initialization & config:
  // - https://revealjs.com/initialization/
  // - https://revealjs.com/config/
  Reveal.initialize({
    hash: true,

    // Learn about plugins: https://revealjs.com/plugins/
    plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
    defaultTiming: null
  })
</script>
</body>
</html>
