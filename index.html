<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/black.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>
<body>
<div class="reveal">
    <div class="slides">
<!--        home page -->
        <section>
            <section>
                <h1>Tech Structure Of XXX</h1>
                <aside class="notes">
                    Hi everyone, welcome to today's session.<br>
                    We'll talk about how we built a frontend project in XXX project, <br>
                    and show we used technology in frontend.<br>
                </aside>
            </section>
            <section>
                <img width="100%" height="auto" data-src="./imgs/strcture.png">
                <aside class="notes">
                    It's a technical map for our code. <br>
                    in application core.
                    We use React and Typescript as our base framework.<br>
                    And we choose MUI library develop our UI component. <br>
                    And for http request, we choose Axios as the solution <br>
                    About the unit test, <br>
                    Jest and Testing library can to test UI and logic<br>
                    MirageJs provide mock server, <br>
                    it can help us to run xxx project in local env.<br>
                    In develop plugin <br>
                    we use husky and eslint to check and format our code <br>
                    That's all for the frameworks we'll share today. <br>
                    Next, let's share some introductions for these frameworks.<br>
                </aside>
            </section>
        </section>

<!--        React-->
        <section>
            <section>
                <h2>React</h2>
                <p>A JavaScript library for building user interfaces</p>
                <img width="20%" height="auto" data-src="./imgs/react.png">
            </section>
            <section>
                <h3>React Scripts</h3>
                <p>
                    It's simply to create single-page React App.
                </p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        $ npx create-react-app my-app
                        $ cd my-app
                        $ npm start

                        // if want create a typescript app, following the code
                        $ npx create-react-app my-app --template typescript
                    </code>
                </pre>
                <aside class="notes">
                    react is a JavaScript library for building user interfaces <br>
                    it provide a script to help users quickly build react App.<br>
                    this example create my-app, <br>
                    it just needs one line code.<br>
                    if want to create a typescript app, you can add param. <br>
                    template typescript<br>
                </aside>
            </section>
            <section>
                <h3>Component</h3>
                <p>Components let you split the UI into independent, reusable pieces</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Welcome(props) {
                          return <h1>Hello, {props.name}</h1>;
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react components split the UI part independent and reusable. <br>
                    in our project the vise table and mastercard table have same structure <br>
                    we have defined one component for these twe table.<br>
                    we just input visa data or mastercard data to this component.<br>
                    it can show visa table or mastercard table based different data<br>
                    this demo is a sample component 简单的例子<br>
                    we can define component as function or lambda.<br>
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                       function Example() {
                          // Add some State
                          // Init && Destroy Something
                          // Watch Something
                          return (
                            <div>
                              <p>You clicked 0 times</p>
                            </div>
                          );
                        }
                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{() => setCount(count + 1)}">
                                Click me
                                </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context <br>
                    and packaged side effect <br>
                    we can use hooks to fetching data and setting up a subscription and changing the DOM and logging <br>
                    hooks have many kinds.<br>
                    in our project have use state hook, effect hook and context hook.<br>
                    this demo to introduce effect hook <br><br>

                    we can declare state variable is count (look like this line)<br>
                    and if we want init something<br>
                    such as we can define init webSocket code in useEffect <br>
                    it will run when component init. <br>
                    and if we want destroy something <br>
                    such as we can define close webSocket code in useEffect return <br>
                    it will run when component destroy <br><br>

                    and if we want watch something changed <br>
                    we can define it in useEffect second param <br>
                    such as this demo.(plus) <br>
                    when count have been updated. useEffect will run<br>
                    the document title will be updated <br>
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Example() {
                          // Add some State
                          const [count, setCount] = useState(0);
                          // Init && Destroy Something
                          // Watch Something

                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{()=> setCount(count + 1)}">
                                Click me
                              </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context <br>
                    and packaged side effect <br>
                    we can use hooks to fetching data and setting up a subscription and changing the DOM and logging <br>
                    hooks have many kinds.<br>
                    in our project have use state hook, effect hook and context hook.<br>
                    this demo to introduce effect hook <br><br>

                    we can declare state variable is count (look like this line)<br>
                    and if we want init something<br>
                    such as we can define init webSocket code in useEffect <br>
                    it will run when component init. <br>
                    and if we want destroy something <br>
                    such as we can define close webSocket code in useEffect return <br>
                    it will run when component destroy <br><br>

                    and if we want watch something changed <br>
                    we can define it in useEffect second param <br>
                    such as this demo.(plus) <br>
                    when count have been updated. useEffect will run<br>
                    the document title will be updated <br>
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Example() {
                          // Add some State
                          const [count, setCount] = useState(0);
                          // Init && Destroy Something
                          useEffect(() => {
                            Websocket.open();
                            return ()=> Websocket.close();
                          },);
                          // Watch Something
                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{()=> setCount(count + 1)}">
                                Click me
                                </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context <br>
                    and packaged side effect <br>
                    we can use hooks to fetching data and setting up a subscription and changing the DOM and logging <br>
                    hooks have many kinds.<br>
                    in our project have use state hook, effect hook and context hook.<br>
                    this demo to introduce effect hook <br><br>

                    we can declare state variable is count (look like this line)<br>
                    and if we want init something<br>
                    such as we can define init webSocket code in useEffect <br>
                    it will run when component init. <br>
                    and if we want destroy something <br>
                    such as we can define close webSocket code in useEffect return <br>
                    it will run when component destroy <br><br>

                    and if we want watch something changed <br>
                    we can define it in useEffect second param <br>
                    such as this demo.(plus) <br>
                    when count have been updated. useEffect will run<br>
                    the document title will be updated <br>
                </aside>
            </section>
            <section data-auto-animate>
                <h3>Hooks</h3>
                <p>Global Context, Packaged Side Effects</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                        function Example() {
                          // Add some State
                          const [count, setCount] = useState(0);
                          // Init && Destroy Something
                          useEffect(() => {
                            Websocket.open();
                            return ()=> Websocket.close();
                          },);
                          // Watch Something
                          useEffect(() => {
                            document.title = `You clicked ${count} times`;
                          },[count]);
                          return (
                            <div>
                              <p>You clicked {count} times</p>
                              <button onClick="{()=> setCount(count + 1)}">
                                Click me
                                </button>
                            </div>
                          );
                        }
                    </code>
                </pre>
                <aside class="notes">
                    react hooks provide global context <br>
                    and packaged side effect <br>
                    we can use hooks to fetching data and setting up a subscription and changing the DOM and logging <br>
                    hooks have many kinds.<br>
                    in our project have use state hook, effect hook and context hook.<br>
                    this demo to introduce effect hook <br><br>

                    we can declare state variable is count (look like this line)<br>
                    and if we want init something<br>
                    such as we can define init webSocket code in useEffect <br>
                    it will run when component init. <br>
                    and if we want destroy something <br>
                    such as we can define close webSocket code in useEffect return <br>
                    it will run when component destroy <br><br>

                    and if we want watch something changed <br>
                    we can define it in useEffect second param <br>
                    such as this demo.(plus) <br>
                    when count have been updated. useEffect will run<br>
                    the document title will be updated <br>
                </aside>
            </section>
            <section>
                <h3>Router</h3>
                <p>a fully-featured client routing library for React</p>
                <img width="50%" height="auto" data-src="./imgs/router.png">
                <aside class="notes">
                    React Router is a fully-featured client routing library for React.<br>
                    based the image can understand react router.<br>
                    chrome return our react application <br>
                    when visiting web page. <br>
                    we can give each component a URI.<br>
                    router based URI to render different components in current page. <br>
                    and the url will be changed, but full page doesn't reload.<br>
                </aside>
            </section>
        </section>

<!--        MUI-->
        <section>
            <section>
                <h2>Mui</h2>
                <p>MUI provides a fast way to develop React applications</p>
                <img width="20%" height="auto" data-src="./imgs/mui.png">
                <aside class="notes">
                    MUI is a popular React UI framework.<br>
                    It provide a fast way to develop React applications.<br>
                    We can reuse many already MUI components to develop our component.
                </aside>
            </section>
            <section>
                <h3>Mui Install</h3>
                <p>Follow the documents at their website</p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers>
                         $ npm install @mui/material @emotion/react @emotion/styled
                    </code>
                </pre>
                <aside class="notes">
                    It's easy to import it to our React project. <br>
                    Just follow the documents at their website.
                </aside>
            </section>
            <section>
                <h3>Mui Component</h3>
                <p>

                </p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers="3|6">
                        <script type="text/template">
                        import * as React from 'react';
                        import ReactDOM from 'react-dom';
                        import Button from '@mui/material/Button';

                        function App() {
                          return <Button variant="contained">Hello World</Button>;
                        }

                        ReactDOM.render(<App/>, document.querySelector('#app'));
                        </script>
                    </code>
                </pre>
                <aside class="notes">
                    And for the components, we can use it in our code after import it.
                </aside>
            </section>
            <section>
                <h3>Mui Style</h3>
                <p>

                </p>
                <pre data-id="code-animation">
                    <code class="hljs" data-trim data-line-numbers="3-4|6-12|15">
                        <script type="text/template">
                        import * as React from 'react';
                        import ReactDOM from 'react-dom';
                        import { red } from '@mui/material/colors';
                        import { ThemeProvider, createTheme } from '@mui/material/styles';

                        const theme = createTheme({
                          palette: {
                            primary: {
                              main: red[500],
                            },
                          },
                        });

                        function App() {
                        return <ThemeProvider theme={theme}>...</ThemeProvider>;
                        }
                        ReactDOM.render( <App/>, document.querySelector('#app'));
                        </script>
                    </code>
                </pre>
                <aside class="notes">
                    We can customize(custom : zi) MUI with our own theme(thi:mo).<br>
                    With the ThemeProvider can change the colors <br>
                    * the typography and much more. <br>
                    * next part is shared by pengrui
                </aside>
            </section>
        </section>

<!--        Axios-->
        <section>
            <section>
                <h2>Axios</h2>
                <p>Promise based HTTP client for the browser and node.js</p>
                <img width="20%" src="imgs/axios.png"/>
                <aside class="notes">
                    We always need to communicate with the backend, and usually using RESTful apis. <br/>
                    So we chose Axios to finish the network invoke.
                </aside>
            </section>

            <section>
                <h3>Axios Install</h3>
                 <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers>
                         $ npm install axios
                     </code>
                 </pre>
                 <aside class="notes">
                     It's easy to import Axios for a Node.js based project.
                 </aside>
            </section>
            <section>
                <h3>Usuage</h3>
                 <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1|5-9|11-12|13-16|17-19">
                         import axios from "axios";

                         function someMethod(){
                            // ....
                            const instance = axios.create({
                              baseURL: 'https://some-domain.com/api/',
                              timeout: 1000,
                              headers: {'X-Custom-Header': 'foobar'}
                            });

                            // methods: get, post, put, delete etc.
                            instance.get('/data')
                              .then(res => {
                                // get the response and do anything you want
                                // ....
                              })
                              .catch(err=>{
                                // http error here
                              })
                         }
                     </code>
                 </pre>
                <aside class="notes">
                    It's a usage demo for axios. <br/>
                    Just like HttpClient for Java. <br/>
                    1st, import the axios and use the factory method to create a instance.  <br/>
                    We can set up the base config in the factory method, such as baseURL, timeout.<br/>
                    2rd, Just invoke the methods in the instance.  <br/>
                    After that, a Promise object will be returned as the http response. <br/>
                    We can use point then to do the normal logic with success response. <br/>
                    And we can point catch to handle the network or api error.
                </aside>
            </section>
        </section>

<!--        MirageJs-->
        <section>
            <section>
                <h2>miragejs</h2>
                <p>Build complete frontend features,</p>
                <p>even if your API doesn't exist</p>
                <img width="20%" height="auto" data-src="./imgs/mirage.png">
                <aside class="notes">
                    When we develop the frontend in local, there always has a problem that we can't connect to the backend.<br/>
                    So we can try to build a mock server which can mock the api response without backend.<br/>
                    And we chose MirageJs to do this work.
                </aside>
            </section>
            <section>
                <h3>MirageJs Install</h3>

                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers>
                         $ npm install --save-dev miragejs
                     </code>
                </pre>
                <aside class="notes">
                    Like others, we can use npm install to quick import it to our project.<br/>
                    Also, we use a flag save-dev in the shell, <br/>
                    so it'll be effective only before building the code,<br/>
                    and won't goto our environment.
                </aside>
            </section>
            <section>
                <h3>MirageJs Usage</h3>
                 <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1|4,10|5-9">
                        import { createServer } from "miragejs"

                        export default function () {
                          createServer({
                            routes() {
                              this.get("/data", () => ({
                                reminders: [],
                              }))
                            },
                          })
                        }
                     </code>
                 </pre>
                <aside class="notes">
                    1st, import the createServer form MirageJs.<br/>
                    2nd, use the createServer method to build a mock server.<br/>
                    3rd, we can define the url we want to mock.<br/>
                    Then, all http requests contained in the list from our code in frontend will proxy by MirageJs
                </aside>
            </section>
        </section>

<!--       Test -->
        <section>
            <section>
                <h2>Test</h2>
                <p>Not only the logic, but also the UI</p>
                <p>Jest && Testing Library</p>
                <img width="20%" height="auto" data-src="./imgs/test.png">
                <aside class="notes">
                    To make our code maintainable and strong,<br/>
                    we must have complete tests. Not only the logic, but also the UI in frontend.<br/>
                    We chose Jest as our base test framework. <br/>
                    It's the most popular test framework for JS code. Just like Junit for Java.<br/>
                    And chose Testing Library to test the UI part.
                </aside>
            </section>
            <section>
                <h2>Install</h2>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1-2|4-5">
                         // install Jest
                         $ npm install --save-dev jest

                         // install testing-library
                         $ npm install --save-dev @testing-library/react
                     </code>
                 </pre>
                <aside class="notes">
                    It's the same as other dependency to install jest and testing library.<br/>
                    And because we only use those two for test, we need add the flag 'save-dev' too.
                </aside>
            </section>
            <section>
                <h2>Jest Usage</h2>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1-4|7|9,11|10">
                         // some business code
                         export function sum(a, b) {
                           return a + b;
                         }

                         // test with jest
                         import sum form 'SomeBusinessModule'

                         it('adds 1 + 2 to equal 3', () => {
                           expect(sum(1, 2)).toBe(3);
                         });
                     </code>
                 </pre>
                <aside class="notes">
                    It's a demo for Jest usage.<br/>
                    1st, we have a business to test. This's method to plus two numbers <br/>
                    And then we can import the business to our test. <br/>
                    We can use the method named 'it' to describe a test. <br/>
                    The method has two parameters, <br/>
                    the first is a description about what we'll do for that test<br/>
                    the second is a lambda function for the test logic.
                </aside>
            </section>
            <section>
                <h2>Testing Library Usage</h2>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1|2-5|7|8-9|11-12|14-16|18-21">
                         <script type="text/template">
                            import HelloWorld from '../HelloWorld'
                            import React from 'react'
                            import {render, fireEvent, waitFor, screen}
                             from '@testing-library/react'
                            import '@testing-library/jest-dom'

                            it('loads and displays greeting', async () => {
                              // render the page in a 'fake' chrome
                              render(<HelloWorld />)

                              // the fireEvent can mock user action in the 'fake' chrome
                              fireEvent.click(screen.getByText('Load Greeting'))

                              // the 'screen' can help us to get the content in the 'fake' chrome
                              // wait until something we expect happen on the screen
                              await waitFor(() => screen.getByRole('heading'))

                              // do some except
                              expect(screen.getByRole('heading'))
                                .toHaveTextContent('hello there')
                              expect(screen.getByRole('button')).toBeDisabled()
                            })
                         </script>
                     </code>
                 </pre>
                <aside class="notes">
                    It's a demo to test the UI by testing-library.<br/>
                    1st, it's a React component to test. <br/>
                    and there are some test utils from jest and testing-library. <br/>
                    As before, we use a 'it' method to describe a test, <br/>
                    but we use an 'async' lambda to do test cause maybe there'll have some async render we need to wait. <br/>
                    In the test body, we call the render method first to render a component in a Virtual dom container. <br/>
                    We can think there're fake chrome and render the webpage with our code. <br/>

                </aside>
            </section>
        </section>

<!--        Eslint-->
        <section>
            <section>
                <h2>Eslint</h2>
                <p>Find and fix problems in your JavaScript code</p>
                <p>Already provided by React Script </p>
                <img width="20%" height="auto" data-src="./imgs/eslint.png">
                <aside class="notes">
                    To keep our code readable and maintainable, we should make sure all our code are in same style.
                    We use Eslint to do this work. It just like checkStyle or FindBugs for Java.
                </aside>
            </section>
            <section>
                <p>Change the eslint config file</p>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers>
                         // you'll have a .eslintrc.{js,yml,json} file in your project.
                         // In it, you'll see some rules configured like this
                         // The names "semi" and "quotes" are the names of rules in ESLint.
                         // The first value is the error level of the rule and can be one of these values:
                         {
                            "rules": {
                                "semi": ["error", "always"],
                                "quotes": ["error", "double"]
                            }
                        }
                     </code>
                </pre>
            </section>
            <section>
                <p>Once some errors find by Eslint's static analyze</p>
                <img width="auto" height="auto" data-src="./imgs/eslint-error.png">
            </section>
        </section>

<!--        Husky-->
        <section>
            <section>
                <h2>Husky</h2>
                <p>Make easy to add git hook</p>
                <img width="20%" height="auto" data-src="./imgs/husky.png">
                <aside class="notes">
                    To make the code clear in the repo.
                    We add a git hook before each commit to make sure no code error or test error in our code.
                    We chose Husky to do this work.
                </aside>
            </section>
            <section>
                <h3>Install</h3>
                <pre data-id="code-animation">
                     <code class="hljs" data-trim data-line-numbers="1-2|4-6|8-10|13-15">
                         # Install
                         $ npm install husky -D

                         # Edit package.json > prepare script and run it once:
                         $ npm set-script prepare "husky install"
                         $ npm run prepare

                         # Add a hook:
                         $ npx husky add .husky/pre-commit "npm test"
                         $ git add .husky/pre-commit


                         # Make a commit:
                         git commit -m "Keep calm and commit"
                         # `npm test` will run every time you commit\
                     </code>
                 </pre>
            </section>
        </section>

<!--        Work progress-->
        <section>
            <p>What happened when we request a url</p>
            <img width="80%" height="auto" data-src="./imgs/working-progress.png">
            <aside class="notes">
            </aside>
        </section>

<!--        Real Code-->
        <section>
            <h2>The Real Code</h2>
            <p>Mix all the things</p>
        </section>
        <section>
            <h2>Thanks</h2>
        </section>
        <section>
            <h2>links</h2>
            <ul>
                <li><a href="https://www.typescriptlang.org/">TypeScript</a></li>
                <li><a href="https://reactjs.org/">React</a></li>
                <li><a href="https://reactrouter.com/">React Router</a></li>
                <li><a href="https://mui.com">MUI</a></li>
                <li><a href="https://github.com/axios/axios/">Axios</a></li>
                <li><a href="https://miragejs.com/">MirageJs</a></li>
                <li><a href="https://jestjs.io/">Jest</a></li>
                <li><a href="https://testing-library.com/">Testing Library</a></li>
                <li><a href="https://eslint.org/">Eslint</a></li>
                <li><a href="https://github.com/typicode/husky">Husky</a></li>
            </ul>
        </section>
    </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
  // More info about initialization & config:
  // - https://revealjs.com/initialization/
  // - https://revealjs.com/config/
  Reveal.initialize({
    hash: true,

    // Learn about plugins: https://revealjs.com/plugins/
    plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
    defaultTiming: null
  })
</script>
</body>
</html>
